(function(t){function e(e){for(var i,l,r=e[0],o=e[1],d=e[2],h=0,u=[];h<r.length;h++)l=r[h],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&u.push(s[l][0]),s[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);c&&c(e);while(u.length)u.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},s={app:0},n=[];function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/water-level-rdl-app/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"1c91":function(t,e,a){},"1e80":function(t,e,a){"use strict";a("236d")},"236d":function(t,e,a){},"3fd0":function(t,e,a){t.exports=a.p+"img/marina_rdl.7b2a6754.webp"},"49f8":function(t,e,a){var i={"./en.json":"edd4","./fr.json":"f693"};function s(t){var e=n(t);return a(e)}function n(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=n,t.exports=s,s.id="49f8"},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"app-header"},[i("div",{staticClass:"app-title-container"},[i("div",{staticClass:"marina-name"},[t._v(t._s(t.$t("marina-name")))]),i("div",{staticClass:"app-title"},[t._v(t._s(t.$t("app-title")))])]),i("TheLanguageButton")],1),i("div",{staticClass:"the-app-core"},[i("div",{staticClass:"controlAndChart"},[i("TheChartAndOptions",{staticClass:"the-results",attrs:{dataToDisplay:t.dataToDisplay,range:t.range}}),i("TheControlPane",{staticClass:"controlPanel",on:{draught:t.updateData,config:t.modifyData,dateChanged:t.modifyDate}})],1)]),i("div",{staticClass:"app-footer"},[i("div",[t._v(t._s(t.$t("data-provider")))]),i("div",{staticClass:"app-creator-container"},[i("div",[t._v(t._s(t.$t("app-creator")))]),i("a",{staticClass:"app-creator-website",attrs:{href:"https://canopeeconception.ca/",target:"_blank"}},[t._v("Canopée conception")]),i("img",{staticClass:"cc-logo",attrs:{src:a("9b19")}})])])])},n=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{attrs:{id:"marina-image",src:a("3fd0")}}),i("div",{staticClass:"draught-selector"},[i("div",{staticClass:"selector-specific-text"},[t._v(" "+t._s(t.$t("draught"))+" ")]),i("div",{staticClass:"input-selector-specific-wl"},[i("div",{staticClass:"input-number-container"},[i("div",{staticClass:"angle-button-container button-minus-left",on:{click:function(e){return t.modifyDraught(-1)}}},[t._v("-")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.draught,expression:"draught",modifiers:{number:!0}}],staticClass:"input-number",attrs:{type:"number",onclick:"this.select();"},domProps:{value:t.draught},on:{input:[function(e){e.target.composing||(t.draught=t._n(e.target.value))},t.emitConfig],blur:function(e){return t.$forceUpdate()}}}),i("div",{staticClass:"angle-button-container button-plus-right",on:{click:function(e){return t.modifyDraught(1)}}},[t._v("+")])]),i("UnitsSelector")],1)]),i("div",{staticClass:"destination-selector"},[i("div",{staticClass:"selector-specific-text location-selector-text"},[t._v(" "+t._s(t.$t("boat-choice"))+" ")]),i("div",{staticClass:"general-button-container"},[i("div",{staticClass:"general-selection-button destination-button",class:t.destinationSelected===t.marinaValue?"active-selection":"",on:{click:function(){t.destinationSelected=t.marinaValue,t.emitConfig()}}},[t._v(" Marina")]),i("div",{staticClass:"general-selection-button destination-button",class:t.destinationSelected===t.visitorValue?"active-selection":"",on:{click:function(){t.destinationSelected=t.visitorValue,t.emitConfig()}}},[t._v(t._s(t.$t("visitor-dock")))])])]),i("div",{staticClass:"selector-specific-text"},[t._v(" "+t._s(t.$t("select-date")))]),i("div",{staticClass:"date-selector-and-buttons"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.windowWidth<850,expression:"windowWidth < 850"}],staticClass:"greater-smaller-sign",on:{click:t.dayMinusOne}},[t._v("<")]),i("div",{staticClass:"date-selector"},[i("v-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.windowWidth>850,expression:"windowWidth > 850"}],model:{value:t.dateSelected,callback:function(e){t.dateSelected=e},expression:"dateSelected"}}),i("v-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.windowWidth<850,expression:"windowWidth < 850"}],scopedSlots:t._u([{key:"default",fn:function(e){var a=e.inputValue,s=e.inputEvents;return[i("input",t._g({staticClass:"calendar-input border px-2 py-1",domProps:{value:a}},s))]}}]),model:{value:t.dateSelected,callback:function(e){t.dateSelected=e},expression:"dateSelected"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.windowWidth<850,expression:"windowWidth < 850"}],staticClass:"greater-smaller-sign",on:{click:t.dayPlusOne}},[t._v(">")])])])},r=[];const o={foot:{fr:"ft",en:"ft"},meter:{fr:"m",en:"m"}};let d={meter:function(t){return Math.round(.3048*t*100)/100},foot:function(t){return Math.round(t/.3048*100)/100}};const c={fr:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},h={fr:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],en:["January","February","March","April","May","June","July","August","September","October","November","December"]},u={fr:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},p={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},v={dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]};function f(t,e){var a=e[t.getDay()];let i=""+(t.getMonth()+1),s=""+t.getDate();t.getFullYear();i.length<2&&(i="0"+i),s.length<2&&(s="0"+s);var n=[i,s].join("-");return[a,n].join(" ")}function m(t){var e=t.getHours(),a=t.getMinutes();return a<10&&(a="0"+String(a)),[e,a].join(":")}var g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"unit-selector"},[a("div",{staticClass:"unit-choice"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.displayUnitsSelected,expression:"displayUnitsSelected"}],attrs:{type:"radio",id:"meter",value:"meter"},domProps:{checked:t._q(t.displayUnitsSelected,"meter")},on:{change:function(e){t.displayUnitsSelected="meter"}}}),a("label",{staticClass:"custom-radio",attrs:{for:"meter"}},[t._v("m")])]),a("div",{staticClass:"unit-choice"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.displayUnitsSelected,expression:"displayUnitsSelected"}],attrs:{type:"radio",id:"foot",value:"foot"},domProps:{checked:t._q(t.displayUnitsSelected,"foot")},on:{change:function(e){t.displayUnitsSelected="foot"}}}),a("label",{staticClass:"custom-radio",attrs:{for:"foot"}},[t._v("f")])])])},y=[],D={data(){return{displayUnitsSelected:this.$store.state.units}},watch:{displayUnitsSelected:function(t){this.$store.mutations.updateSelectedUnits(t)},"$store.state.units":function(t){this.displayUnitsSelected=t}}},x=D,w=(a("bc82"),a("2877")),b=Object(w["a"])(x,g,y,!1,null,null,null),C=b.exports,T={components:{UnitsSelector:C},computed:{visitorValue(){return this.visitorValues[this.$store.state.units]},marinaValue(){return this.marinaValues[this.$store.state.units]}},data(){let t=1.1,e=2.1,a={meter:t,foot:d.foot(t)},i={meter:e,foot:d.foot(e)},s=new Date;return{extandMarina:!1,activeTab:"visitor",tabIndex:0,specificWaterLevel:6,draught:4,marinaValues:i,visitorValues:a,destinationSelected:i[this.$store.state.units],dateSelected:s,windowWidth:window.innerWidth}},methods:{dayPlusOne:function(){this.$emit("dateChanged",1)},dayMinusOne:function(){this.$emit("dateChanged",-1)},getDay:function(t){return c[this.$i18n.locale][t.getDay()]},getDate:function(t){let e=h[this.$i18n.locale][t.getMonth()],a=t.getDate();return a+" "+e},calculateDiffDays:function(t,e){const a=864e5;return Math.round(Math.abs((t-e)/a))},emitConfig:function(){let t={};t["draught"]=this.draught,t["selectedDate"]=new Date(this.dateSelected.setHours(0,0,0,0)),t["destination"]=parseFloat(this.destinationSelected),t["specificWaterLevel"]=""===this.specificWaterLevel?0:this.specificWaterLevel,this.$emit("config",t)},modifyWaterLevel:function(t){this.specificWaterLevel=this.specificWaterLevel+t,this.emitConfig()},modifyDraught:function(t){this.draught=this.draught+t,this.$emit("draught",this.draught)}},mounted(){this.emitConfig()},watch:{"$store.state.selectedDate":function(t){this.dateSelected=new Date(t)},dateSelected:function(){let t=new Date(this.dateSelected.setHours(0,0,0,0));t.getTime()!=this.$store.state.selectedDate.getTime()&&this.emitConfig()},activeTab:function(){this.$emit("waterLevelType",this.activeTab)},"$store.state.units":function(t){this.draught=d[t](this.draught),this.specificWaterLevel=d[t](this.specificWaterLevel),this.destinationSelected=d[t](this.destinationSelected),this.emitConfig()}}},M=T,S=(a("b5ec"),Object(w["a"])(M,l,r,!1,null,null,null)),L=S.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"calendar-section"},[a("TheCalendarView",{attrs:{colorBoxes:t.colorBoxes,range:t.range}})],1),a("div",{staticClass:"chartAndOptions"},[a("TheChart",{staticClass:"svg-container",attrs:{id:"waterLevelChart",dataToDisplay:t.dataToDisplay,range:t.range,bus:t.bus},on:{colorBoxChanged:t.loadColorBoxes}})],1)])},_=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"timetable-title"},[t._v(t._s(t.$t("navigational-timetable")))]),a("div",[t._v(" "+t._s(t.getDay(t.$store.state.selectedDate))+" "+t._s(t.getDate(t.$store.state.selectedDate))+" ")]),a("div",{staticClass:"calendar-days"},t._l(t.days,(function(e,i){return a("span",{key:i},[t._v(" "+t._s(e)+" "),i<t.days.length-1?a("span",{staticStyle:{"font-weight":"1000"}},[t._v("   /   ")]):t._e()])})),0)])])},k=[],I={props:["colorBoxes","range"],computed:{days(){if(null===this.$store.state.selectedDate)return null;let t=this.getDates(new Date(this.range[0]),new Date(this.range[1])),e=[];for(let a of t)e.push({title:f(a,c[this.$i18n.locale]),data:[]});for(let a=0;a<this.colorBoxes.length;a++){let t=!1;if("good"===this.colorBoxes[a].type){let i,s=f(this.colorBoxes[a].startDate,c[this.$i18n.locale]),n=f(this.colorBoxes[a].endDate,c[this.$i18n.locale]);s===n?i=`${m(this.colorBoxes[a].startDate)} - ${m(this.colorBoxes[a].endDate)}`:(t=!0,i=m(this.colorBoxes[a].startDate)+" - 23:59");let l=e.findIndex(t=>t.title===s);void 0!=e[l]&&s===e[l].title&&e[l].data.push(i),t&&(i="00:00 - "+m(this.colorBoxes[a].endDate),"00:00 - 0:00"!=i&&(l=e.findIndex(t=>t.title===n),void 0!=e[l]&&n===e[l].title&&e[l].data.push(i)))}}for(let a in e)if(f(this.$store.state.selectedDate,c[this.$i18n.locale])===e[a].title)return e[a].data;return null}},methods:{getDay:function(t){return u[this.$i18n.locale][t.getDay()]},getDate:function(t){let e=h[this.$i18n.locale][t.getMonth()],a=t.getDate();return a+" "+e},getDates(t,e){var a=[],i=t;while(i<e)a.push(new Date(i)),i.setDate(i.getDate()+1);return a}}},O=I,P=(a("1e80"),Object(w["a"])(O,B,k,!1,null,null,null)),V=P.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},A=[],W=(a("13d5"),a("898b")),H=(a("3c43"),{props:["dataToDisplay","range","bus"],data(){var t=this,e=W["c"]().x((function(e){return t.x(e.date)})).y((function(e){return t.y(e.value)}));return{fontFamily:"Noto-Sans-JP, Avenir, Helvetica, Arial, sans-serif",mainTextColor:"#092230",localeChosen:null,view:"chart",startDisplayedDate:null,line:e,rect:null,width:1e3,height:550,margin:{top:60,bottom:40,left:20,right:110},content:null,dates:null,minYValue:null,maxYValue:null,extentX:null,svg:null,x:null,y:null,xAxis:null,lineFollowX:null,mouseMoveX:null,selectedData:{},dragStart:null,dateHovered:null,dateMinDisplayed:null,dateMaxDisplayed:null,limitNbOfHours:24,data:[],filteredData:[],lastIntersectIndex:0,index:0,predictionLine:null,intersectionPoints:[],allIntersectIndices:[0],colorBoxes:[]}},computed:{unitString:function(){return o[this.$store.state.units][this.$i18n.locale]}},methods:{splitDateTime:function(t){let e=t.eventDate.split("T"),a=e[0].split("-"),i=e[1].slice(0,-1).split(":");return a+i},clearContent:function(){let t=this;this.content=document.getElementById("waterLevelChart");var e=t.content.lastElementChild;while(e)t.content.removeChild(e),e=t.content.lastElementChild},initializeChart:function(){let t=this;null!=this.localeChosen&&W["j"](this.localeChosen),this.data=[],this.data=[...this.dataToDisplay["waterData"]["wlp"]],this.data.sort((function(e,a){var i=t.splitDateTime(e),s=t.splitDateTime(a);return i>s?1:i<s?-1:0}));for(let i=0;i<this.data.length;i++)this.data[i].date=new Date(this.data[i].eventDate);this.dates=this.data.map(t=>t.date),this.maxYValue=null,this.minYValue=null;var e=W["e"](this.data,t=>t.value);(null===this.minYValue||e<this.minYValue)&&(this.minYValue=e);var a=W["d"](this.data,t=>t.value);(null===this.maxYValue||a>this.maxYValue)&&(this.maxYValue=a),this.extentX=W["b"](this.data,t=>t.date),this.dateMinDisplayed=new Date(this.$store.state.selectedDate),this.dateMaxDisplayed=new Date(this.$store.state.selectedDate),this.dateMaxDisplayed.setHours(this.dateMinDisplayed.getHours()+this.limitNbOfHours),this.x=W["h"](),this.setXDomain(),this.x.range([this.margin.left,this.width-this.margin.right]),this.y=W["g"]().domain([this.minYValue,this.maxYValue]).range([this.height-this.margin.bottom,this.margin.top]),this.svg=W["i"](this.content).append("svg").attr("class","svg-content-responsive").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 1000 600")},addPredictionLine(){this.svg.append("g"),this.predictionLine=this.svg.append("path").data([this.data]).attr("class","line upfrontItem").attr("d",this.line).style("stroke-width",0).style("fill","none"),this.svg.append("path").data([this.filteredData]).attr("class","line upfrontItem").attr("d",this.line).style("stroke-width",4).style("stroke",this.mainTextColor).style("fill","none")},computeColorBoxesAndIntersections(){this.intersectionPoints=[],this.colorBoxes=[],this.allIntersectIndices=[0];var t=this.y(this.dataToDisplay.waterLevel),e=this.predictionLine.node(),a=e.getTotalLength();this.lastIntersectIndex=0;for(var i=0;i<a;i++){var s=e.getPointAtLength(i);if(Math.floor(s.y)===Math.floor(t)&&(this.findIndexRelated(s.x),!this.allIntersectIndices.includes(this.index)&&this.index-this.allIntersectIndices[this.allIntersectIndices.length-1]>1)){this.allIntersectIndices.push(this.index);let t=e.getPointAtLength(i-1).y-s.y,a=null;a=t<0?"maxToMin":"minToMax",this.intersectionPoints.length>0&&this.index-this.intersectionPoints[this.intersectionPoints.length-1].index<11?this.intersectionPoints.pop():this.intersectionPoints.push({index:this.index,x:this.dates[this.index],y:s.y,intersectType:a});let n=this.lastIntersectIndex,l=this.index;this.constructColorBox(n,l),this.lastIntersectIndex=this.index}}let n=this.lastIntersectIndex,l=this.dates.length-1;this.constructColorBox(n,l)},constructColorBox(t,e){const a=t=>t.reduce((t,e)=>t+e)/t.length;let i=this.data.slice(t,e+1);i.splice(0,0,{date:this.data[t]["date"],value:this.dataToDisplay.waterLevel}),i.push({date:this.data[e]["date"],value:this.dataToDisplay.waterLevel});let s=null,n=null;0!=i.length&&(a(i.map(t=>t.value))>this.dataToDisplay.waterLevel?(s="#4FBCA2",n="good"):(s="#DB2B1D",n="bad"),this.colorBoxes.push({type:n,startIndex:t,endIndex:e,startDate:this.dates[t],endDate:this.dates[e],color:s,values:i})),this.$emit("colorBoxChanged",this.colorBoxes)},fillChart:function(){let t=this;this.svg.append("line").attr("x1",this.margin.left).attr("y1",this.y(this.dataToDisplay.waterLevel)).attr("x2",this.width-this.margin.right+20).attr("y2",this.y(this.dataToDisplay.waterLevel)).attr("class","line upfrontItem horizontal-threshold-line").style("stroke","#ffe601"),this.svg.append("line").attr("x1",this.width-this.margin.right+24).attr("y1",this.y(this.dataToDisplay.waterLevel)).attr("x2",this.width-this.margin.right+30).attr("y2",this.y(this.dataToDisplay.waterLevel)).attr("class","line upfrontItem horizontal-threshold-line").style("stroke","#c4b914"),this.svg.append("line").attr("x1",this.width-this.margin.right+34).attr("y1",this.y(this.dataToDisplay.waterLevel)).attr("x2",this.width-this.margin.right+40).attr("y2",this.y(this.dataToDisplay.waterLevel)).attr("class","line upfrontItem horizontal-threshold-line").style("stroke","#929423"),this.svg.append("line").attr("x1",this.width-this.margin.right+44).attr("y1",this.y(this.dataToDisplay.waterLevel)).attr("x2",this.width-this.margin.right+50).attr("y2",this.y(this.dataToDisplay.waterLevel)).attr("class","line upfrontItem horizontal-threshold-line").style("stroke","#3e553e"),this.svg.append("text").style("opacity",1).style("font-size","22px").style("font-weight","bold").style("font-family",this.fontFamily).attr("class","levelValuesOnChart upfrontItem").attr("x",this.width-this.margin.right+60).attr("y",this.y(this.dataToDisplay.waterLevel)+6).text(Math.round(10*this.dataToDisplay.waterLevel)/10+this.unitString).style("fill",this.mainTextColor);let e=this.dataToDisplay["waterData"]["wlphilo"].filter((function(e){return new Date(e.eventDate)>=t.dateMinDisplayed&&new Date(e.eventDate)<=t.dateMaxDisplayed}));for(let i=0;i<e.length;i++){let a=null;if(0===i){let t=e[i+1]["value"]-e[i]["value"];a=t>0?"low":"high"}else{let t=e[i-1]["value"]-e[i]["value"];a=t>0?"low":"high"}let s=new Date(e[i]["eventDate"]);this.svg.append("circle").attr("class","circle").attr("cx",this.x(s)).attr("cy",this.y(e[i]["value"])).attr("r",10).style("fill","#D9D9D9").style("stroke",this.mainTextColor);let n=s.getHours().toString(),l=s.getMinutes().toString();l=("0"+l).slice(-2),this.svg.append("text").style("opacity",1).style("fill",this.mainTextColor).style("font-family",this.fontFamily).style("font-size","24px").attr("class","levelValuesOnChart upfrontItem").attr("x",this.x(s)).attr("y",(function(){return"high"===a?t.y(e[i]["value"])-35:t.y(e[i]["value"])+29})).attr("text-anchor","middle").text(n+":"+l),this.svg.append("text").style("opacity",1).style("fill",this.mainTextColor).style("font-size","20px").style("font-family",this.fontFamily).attr("class","levelValuesOnChart upfrontItem").attr("x",this.x(s)).attr("y",(function(){return"high"===a?t.y(e[i]["value"])-15:t.y(e[i]["value"])+50})).attr("text-anchor","middle").text(Math.round(10*e[i]["value"])/10+this.unitString)}for(let i of this.intersectionPoints.filter((function(e){return e.x>=t.dateMinDisplayed&&e.x<=t.dateMaxDisplayed}))){this.svg.append("circle").attr("class","circle").attr("cx",t.x(i.x)).attr("cy",i.y).attr("r",7).style("fill","#D9D9D9");let e=i.x.getHours().toString(),a=i.x.getMinutes().toString();a=("0"+a).slice(-2),this.svg.append("text").style("opacity",1).style("fill",this.mainTextColor).style("font-size","23px").style("font-family",this.fontFamily).attr("class","levelValuesOnChart upfrontItem").attr("x",(function(){return"minToMax"===i.intersectType?t.x(i.x)+15:t.x(i.x)+4})).attr("y",i.y-5).attr("text-anchor","right").text(e+":"+a)}let a=[];for(let i=0;i<this.colorBoxes.length;i++)if(this.dateMinDisplayed>=this.colorBoxes[i].startDate&&this.dateMaxDisplayed<=this.colorBoxes[i].endDate){a.push({color:this.colorBoxes[i].color,values:[]});let e=this.colorBoxes[i].values.filter((function(e){return e.date>=t.dateMinDisplayed&&e.date<=t.dateMaxDisplayed})),s=[{date:this.dateMinDisplayed,value:this.dataToDisplay.waterLevel}].concat(e);s.push({date:this.dateMaxDisplayed,value:this.dataToDisplay.waterLevel}),a.push({color:this.colorBoxes[i].color,values:s})}else if(this.dateMinDisplayed>=this.colorBoxes[i].startDate&&this.dateMinDisplayed<=this.colorBoxes[i].endDate){a.push({color:this.colorBoxes[i].color,values:[]});let e=this.colorBoxes[i].values.filter((function(e){return e.date>=t.dateMinDisplayed&&e.date<=t.dateMaxDisplayed})),s=[{date:this.dateMinDisplayed,value:this.dataToDisplay.waterLevel}].concat(e);a.push({color:this.colorBoxes[i].color,values:s})}else if(this.dateMinDisplayed<=this.colorBoxes[i].startDate&&this.dateMaxDisplayed>=this.colorBoxes[i].endDate)a.push({color:this.colorBoxes[i].color,values:this.colorBoxes[i].values});else if(this.dateMaxDisplayed>=this.colorBoxes[i].startDate&&this.dateMaxDisplayed<=this.colorBoxes[i].endDate){let e=this.colorBoxes[i].values.filter((function(e){return e.date>=t.dateMinDisplayed&&e.date<=t.dateMaxDisplayed}));e.push({date:this.dateMaxDisplayed,value:this.dataToDisplay.waterLevel}),a.push({color:this.colorBoxes[i].color,values:e})}for(let i=0;i<a.length;i++)this.svg.append("path").data([a[i].values]).attr("class","line").attr("d",this.line).style("stroke-width",4).style("stroke",a[i].color).style("fill",a[i].color)},findIndexRelated:function(t){var e=this.x.invert(t);this.index=W["a"](this.dates,e)},findDataRelated(t,e){var a=W["f"](t,e);this.findIndexRelated(a[0]),this.selectedData=this.data[this.index]},addInteractions:function(){this.rect=this.svg.append("rect").style("fill","none").style("pointer-events","all").attr("class","chartRect")},dragStarted:function(){"mousedown"===event.type&&this.findDataRelated(event,this.rect),"touchstart"===event.type&&this.findDataRelated(event.touches[0],event.target),this.dragStart=this.selectedData},dragged:function(){"mousemove"===event.type&&this.findDataRelated(event,this.rect),"touchmove"===event.type&&this.findDataRelated(event.touches[0],event.target);var t=this.dragStart.date.getTime()-this.selectedData.date.getTime();this.dateMinDisplayed.setTime(this.dateMinDisplayed.getTime()+t),this.dateMaxDisplayed.setTime(this.dateMaxDisplayed.getTime()+t),this.$emit("draggedDate",this.dateMinDisplayed),this.resetChart()},resetChart:function(){this.setXDomain(),this.svg.selectAll(".line").remove(),this.svg.selectAll(".rect").remove(),this.svg.selectAll(".circle").remove(),this.svg.selectAll(".levelValuesOnChart").remove(),this.addPredictionLine(),this.fillChart(),this.svg.selectAll(".upfrontItem").raise(),this.svg.selectAll(".circle").raise(),this.svg.selectAll(".chartRect").raise()},setXDomain:function(){var t;this.dateMinDisplayed<=this.extentX[0]?(t=new Date(this.extentX[0]),this.dateMinDisplayed=new Date(this.extentX[0]),this.dateMaxDisplayed=new Date(t.setHours(t.getHours()+this.limitNbOfHours)),this.filterData(),this.x.domain([this.dateMinDisplayed,this.dateMaxDisplayed])):this.dateMinDisplayed>this.extentX[0]&&this.dateMaxDisplayed<this.extentX[1]?(this.filterData(),this.x.domain([this.dateMinDisplayed,this.dateMaxDisplayed])):this.dateMaxDisplayed>=this.extentX[1]&&(t=new Date(this.extentX[1]),this.dateMaxDisplayed=new Date(this.extentX[1]),this.dateMinDisplayed=new Date(t.setHours(t.getHours()-this.limitNbOfHours)),this.filterData(),this.x.domain([this.dateMinDisplayed,this.dateMaxDisplayed]))},filterData(){let t=this;this.filteredData=this.data.filter((function(e){return e.date>=t.dateMinDisplayed&&e.date<=t.dateMaxDisplayed}))},updateChart:function(){this.clearContent(),0!==this.dataToDisplay.waterData["wlp"].length&&(this.initializeChart(),null!==this.svg&&(this.addPredictionLine(),this.computeColorBoxesAndIntersections(),this.fillChart(),this.svg.selectAll(".upfrontItem").raise(),this.svg.selectAll(".circle").raise(),this.svg.selectAll(".chartRect").raise(),this.addInteractions()))}},mounted(){},watch:{"dataToDisplay.waterData.wlphilo":function(t){this.updateChart()},"dataToDisplay.waterLevel":function(){this.updateChart()},"$i18n.locale":function(){"fr"===this.$i18n.locale?this.localeChosen=v:this.localeChosen=p,this.updateChart()}}}),U=H,N=(a("9b17"),Object(w["a"])(U,j,A,!1,null,null,null)),R=N.exports,F={components:{TheCalendarView:V,TheChart:R},props:["dataToDisplay","range"],data(){return{view:"chart",colorBoxes:[],daysArray:[],startDisplayedDate:null,activeIndex:1,bus:new i["default"],isBackHovered:!1,isNextHovered:!1}},computed:{},methods:{mouseOverBack:function(){this.isBackHovered=!0},mouseLeaveBack:function(){this.isBackHovered=!1},mouseOverNext:function(){this.isNextHovered=!0},mouseLeaveNext:function(){this.isNextHovered=!1},loadColorBoxes:function(t){this.colorBoxes=t},logClick:function(t){this.bus.$emit("dateClicked",this.daysArray[t-1]),this.activeIndex=t}},watch:{range:function(t,e){0!==e.length&&(t[0].getTime()!==e[0].getTime()||(t[1].getTime(),e[1].getTime()))}}},Y=F,z=(a("6613"),Object(w["a"])(Y,$,_,!1,null,null,null)),X=z.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"language-button",on:{click:function(e){return t.switchLocale()}}},[i("img",{staticClass:"logo",attrs:{src:a("f211")}}),i("span",{staticClass:"switchText"},[t._v(t._s("fr"===t.$i18n.locale?"EN":"FR")+" ")])])},E=[],J={methods:{switchLocale(){"fr"===this.$i18n.locale?this.$i18n.locale="en":this.$i18n.locale="fr"}}},Z=J,G=(a("f30c"),Object(w["a"])(Z,q,E,!1,null,null,null)),Q=G.exports,K=a("bc3a"),tt=a.n(K),et={name:"App",components:{TheControlPane:L,TheChartAndOptions:X,TheLanguageButton:Q},data(){return{range:[],selectedDate:null,draught:null,destination:null,specificWaterLevel:null,waterLevelData:{},limitWaterLevel:0,dataToDisplay:{},type:"visitor",changedRange:!0}},methods:{date2string(t,e,a,i,s){return t+"-"+e+"-"+a+"T"+i+":"+s+":00Z"},getDateValuesFromDate(t){var e=String(t.getUTCFullYear()),a=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),s=String(t.getUTCHours()).padStart(2,"0"),n=String(t.getUTCMinutes()).padStart(2,"0");return this.date2string(e,a,i,s,n)},apiCall:async function(){let t=[["wlp","wlp"],["wlp-hilo","wlphilo"]],e=this;for(let a of t){const t=await tt.a.get("https://api.iwls.azure.cloud.dfo-mpo.gc.ca/api/v1/stations/5cebf1de3d0f4a073c4bbaf1/data?time-series-code="+a[0]+"&from="+e.getDateValuesFromDate(e.range[0])+"&to="+e.getDateValuesFromDate(e.range[1]));200===t.status&&(this.waterLevelData[a[1]]=t.data)}},updateData:function(t){this.draught=t,this.checkType(),this.updateDataToDisplay()},modifyData:async function(t){this.$store.state.selectedDate===t.selectedDate?this.changedRange=!1:this.changedRange=!0,this.$store.mutations.updateSelectedDate(t.selectedDate),this.range=this.getRange(t.selectedDate),this.draught=t.draught,this.destination=t.destination,this.specificWaterLevel=t.specificWaterLevel,this.checkType(),await this.downloadData(),this.updateDataToDisplay()},modifyDate:async function(t){let e=new Date(this.$store.state.selectedDate);e.setDate(e.getDate()+t),this.$store.state.selectedDate===e?this.changedRange=!1:this.changedRange=!0,this.$store.mutations.updateSelectedDate(new Date(e)),this.range=this.getRange(e),this.checkType(),await this.downloadData(),this.updateDataToDisplay()},checkType:function(){this.limitWaterLevel=this.draught+this.destination},downloadData:async function(){!0===this.changedRange&&(await this.apiCall(),"meter"!=this.$store.state.units&&this.changeDataUnits(this.$store.state.units))},updateDataToDisplay:function(){this.$set(this.dataToDisplay,"waterLevel",this.limitWaterLevel),this.$set(this.dataToDisplay,"waterData",{});for(let t in this.waterLevelData)this.$set(this.dataToDisplay["waterData"],t,this.waterLevelData[t])},getRange:function(t){let e=new Date(t);e.setDate(e.getDate()),e.setHours(0,0,0,0);let a=new Date(t);return a.setDate(a.getDate()+1),a.setHours(0,0,0,0),[e,a]},changeDataUnits:function(t){for(let e in this.waterLevelData)for(let a=0;a<this.waterLevelData[e].length;a++)this.waterLevelData[e][a].value=d[t](this.waterLevelData[e][a].value)}},watch:{"$store.state.units":function(t){this.changeDataUnits(t),this.$set(this.dataToDisplay,"waterLevel",this.limitWaterLevel),this.$set(this.dataToDisplay,"waterData",this.waterLevelData)}}},at=et,it=(a("034f"),Object(w["a"])(at,s,n,!1,null,null,null)),st=it.exports,nt=a("a925");function lt(){const t=a("49f8"),e={};return t.keys().forEach(a=>{const i=a.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){const s=i[1];e[s]=t(a)}}),e}i["default"].use(nt["a"]);var rt=new nt["a"]({locale:"en",fallbackLocale:"en",messages:lt()}),ot=a("5887"),dt=a.n(ot),ct=a("5f5b");const ht=i["default"].observable({units:"foot",selectedDate:null}),ut={updateSelectedUnits(t){ht.units=t},updateSelectedDate(t){ht.selectedDate=t}};var pt={state:ht,mutations:ut};a("f9e3"),a("2dd8");i["default"].config.productionTip=!1,i["default"].use(dt.a),i["default"].prototype.$store=pt,i["default"].use(ct["a"]),new i["default"]({i18n:rt,render:t=>t(st)}).$mount("#app")},"623b":function(t,e,a){},6613:function(t,e,a){"use strict";a("9e88")},8542:function(t,e,a){},"85ec":function(t,e,a){},"9b17":function(t,e,a){"use strict";a("1c91")},"9b19":function(t,e,a){t.exports=a.p+"img/logo.09126aba.svg"},"9e88":function(t,e,a){},b5ec:function(t,e,a){"use strict";a("f6f8")},bc82:function(t,e,a){"use strict";a("623b")},edd4:function(t){t.exports=JSON.parse('{"draught":"Select draught:","submit":"Submit","chartYLabel":"Water Level","chart":"Chart","Calendrier":"Calendar","invalidRangeMessage":"The range selected cannot be more than 6 days. It has been corrected automatically","boat-choice":"Select location:","visitor-dock":"Service dock","unknown_waterlevel":"Unknown water level required","specific_waterlevel":"Specific water level","units":"Units","meters":"Meter","feet":"Foot","meter":"meter","foot":"foot","calendar-title":"To select another date or dates, please click on the calendar","calendar-usage-title":"How to use the calendar?","calendar-explanation":"With this calendar, you can either select one or several dates.\\nTo select only one date, please click twice on the same date.\\nTo select multiple dates, click on the starting date and then click on the ending date. Please note that it is not posible to select more than 6 days at a time. ","calendar":"Calendar","calendar-view-title":"Possible schedules for entering or leaving","app-title":"Water level prediction","member":"Member","visitor":"Visitor","marina-layout":"View marina layout","specific-water-level":"Select water level","select-date":"Select date:","navigational-timetable":"Navigation timetable","marina-name":"Rivière-du-Loup Yacht Club","data-provider":"Data source: Canadian Hydrographic Service","app-creator":"Website created by "}')},f211:function(t,e,a){t.exports=a.p+"img/language-light.dd65e165.svg"},f30c:function(t,e,a){"use strict";a("8542")},f693:function(t){t.exports=JSON.parse('{"draught":"Sélectionner tirant d\'eau: ","submit":"Soumettre","chartYLabel":"Hauteur d\'eau","chart":"Graphique","Calendrier":"Calendrier","invalidRangeMessage":"La plage de date ne peut être supérieure à 6 jours. Elle a été modifiée automatiquement. ","boat-choice":"Sélectionner l\'emplacement:","visitor-dock":"Quai d\'accueil","unknown_waterlevel":"Niveau d\'eau requis inconnu","specific_waterlevel":"Niveau d\'eau spécifique","units":"Unités","meters":"Mètre","feet":"Pied","meter":"mètre","foot":"pied","calendar-title":"Pour sélectionner une autre date ou groupe de date, veuillez cliquer sur le calendrier","calendar-usage-title":"Comment utiliser le calendrier?","calendar-explanation":"Avec ce calendrier, vous pouvez sélectionner une ou plusieurs dates.\\nPous sélectionner une date, veuiller cliquer à deux reprises sur la même date.\\nPour sélectionner plus d\'une date, veuillez cliquer sur la date de départ puis sur la date de fin. \\nÀ noter qu\'il n\'est pas possible de sélectionner plus de 6 jours à la fois.","calendar":"Calendrier","calendar-view-title":"Horaires possibles pour l\'entrée ou sortie","app-title":"Prédiction des niveaux d\'eau","app-description":"Cet outil permet de planifier vos sorties et entrées dans la marina de Rivière-du-Loup. \\nPour se faire, vous devez:\\nChoisir une ou plusieurs date en cliquand sur le calendrier.\\nIndiquer le tirant d\'eau de votre embarcation.\\nChoisir l\'endroit d\'arrivée ou de sortie. ","app-description-intro":"Cet outil permet de planifier vos sorties et entrées dans la marina de Rivière-du-Loup. \\nPour se faire, vous devez:","app-description-bullet-one":"Choisir une ou plusieurs date en cliquand sur le calendrier.","app-description-bullet-two":"Indiquer le tirant d\'eau de votre embarcation.","app-description-bullet-three":"Choisir l\'endroit d\'arrivée ou de sortie.","member":"Membre","visitor":"Visiteur","marina-layout":"Voir Marina","specific-water-level":"Sélectionner niveau d\'eau","select-date":"Selectionner la date:","navigational-timetable":"Horaire de navigation","marina-name":"Marina Rivière-du-Loup","data-provider":"Source de données: Service hydrographique du Canada","app-creator":"Site web créé par "}')},f6f8:function(t,e,a){}});
//# sourceMappingURL=app.5192bbf6.js.map